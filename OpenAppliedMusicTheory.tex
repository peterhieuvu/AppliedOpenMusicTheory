\documentclass[12pt]{book}
    \usepackage[utf8]{inputenc}
    \usepackage[margin=1in]{geometry}
    \usepackage[english]{babel}
    \usepackage{subfiles}
    \usepackage{fancyhdr}
    \usepackage{titlesec}
    \usepackage{parskip}
    \usepackage{cleveref}

\title{Open Applied Music Theory}
\author{Peter Hieu Vu}
\date{Latest Update: \today}

%Make chapters only clear one page (no blank pages after chapters)
\let\cleardoublepage\clearpage

\crefname{chapter}{§}{§§} %TODO: Do something for sections and subsections too

\renewcommand{\theequation}{\thechapter.\arabic{equation}}

\newcommand\sfchapter[2]{\onlyinsubfile{\chapter{#1}\setcounter{chapter}{\the\numexpr#2-1\relax}}}
\newcommand\sffront[1]{\onlyinsubfile{\chapter*{#1}}}

\pagestyle{fancy}
\setlength{\headheight}{10pt}

\rhead{Chapter\ \thechapter}

%Format Chapter Titles
\titleformat{\chapter}[display]{\normalfont\small\bfseries}{\rule{\textwidth}{1pt}\\\chaptertitlename\ \thechapter}{10pt}{\Huge}

\titleformat{name=\chapter,numberless}[display]  {\normalfont\small\bfseries}{\rule{\textwidth}{1pt}}{10pt}{\Huge}


% Commands
\newcommand\onlyinsubfile[1]{#1}
\newcommand\notinsubfile[1]{}

\newcommand\chord[1]{\textbf{#1}} %temporary, probably change later

% end

\begin{document}
    \renewcommand{\onlyinsubfile}[1]{}
    \renewcommand{\notinsubfile}[1]{#1}

    \maketitle

    \frontmatter
    \chapter{Preface}
        \subfile{chapters/preface}

    \chapter{About}
        \subfile{chapters/about}

    \tableofcontents

    \chapter{Disclaimer}
        \subfile{chapters/disclaimer}

    \mainmatter 
    \setcounter{chapter}{-1}
    
    \chapter{The basics}\label{ch.0}
        \subfile{chapters/chapter0}
    
\end{document}